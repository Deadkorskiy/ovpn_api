#!/usr/bin/env bash

apt-get install python2.7 python3 -y

USER=deploy_onetimevpn_vpn
# ssh-keygen -t rsa -C "deploy_onetimevpn_vpn" -b 4096
ID_RSA_PUB="ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCwHy0fmKDX8l95ORiVQMBVSftoAiqQzy/04b988vtTFvzgP9GTEZe4N1MrvZoQaTYb97QG2tam+Q0aNMJTHLvGrjLuenY3GuSNW1gaQUXzSro4eulnUgbjUS3UbqDZ8u2W7FFERauTJjoKYmJDOD07Y+2cTlAEMFNmShlU4z8MTtSeyRvtrF35QBY3kYY7eAIewov1lg04ZLhUycBeL4JEZCz4eAhNINwk8/+H/mvRWKKDoy6mn6Bn/XEA9tlpeaBsNC7cMJ0/PtpoUhTiog4HYgsj5yWDnPbqC0TD23PhokiYalCUa87eXCaOVh4c7XkLD52H2CsB674wuHZMGZ4T7pq/dDtaq0p6O46xAbD0T1WFEW9sltr7OXQRIiLCz36Um7lvM5s5ebBfEf8V1XSk7q2kty9U4YmBUcc/UpDE9Icppz2E2sadTMgUrMoqoK/yeJ1a74VI2j6H2aQlDEN9jx99Tr6Y1VoSq0tK/RSGVJ7DxyN3+jydrH4f2iVCywPcjr1KTxuHGfB9t+ka3YlzeZrkuOhEIBDQCjjQWktziNYhudTI5UCG5DaywlinXTHMJ7C9KCs9b7IQ2sKScIBJOYIFGmQEH24u1atvLO8zBXRr0PvXNOZEp5WCFsVds9lNsb4MmNDqM3dKdswO2OFaHwbUuqaXx6GebAQksBK1aQ== deploy_onetimevpn_vpn"
ID_RSA="-----BEGIN RSA PRIVATE KEY-----\n
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\n
-----END RSA PRIVATE KEY-----"

GENERATED_PASS=$(python3 -c "import crypt; print(str(crypt.crypt('njksadf98693264fhlajshdfgJHFDLJHSGLDAwirtiwu', 'njkas123R')))")
useradd -m -p $GENERATED_PASS -s /bin/bash $USER
usermod -a -G sudo $USER
mkdir -p /home/$USER/.ssh/
chmod 700 /home/$USER/.ssh
touch /home/$USER/.ssh/authorized_keys
echo $ID_RSA_PUB >> /home/$USER/.ssh/authorized_keys
chmod 600 /home/$USER/.ssh/authorized_keys
echo -e $ID_RSA >> /home/$USER/.ssh/id_rsa
chmod 600 /home/$USER/.ssh/id_rsa
chown $USER:$USER /home/$USER/.ssh -R
rm -- "$0"
